[ç¹é«”ä¸­æ–‡](README_ZH.md) | [English](README.md)

# CYUT at SemEval-2026 Task 3: åŸºæ–¼å¹¾ä½•çŸ¥è¦ºå¤šä»»å‹™å­¸ç¿’èˆ‡ä¸ƒæƒ…å®šå‘åŽŸåž‹ä¹‹ç¶­åº¦å±¤é¢æƒ…æ„Ÿå›žæ­¸

æœ¬é …ç›®ç‚º **SemEval-2026 Task 3 Track B** çš„ç³»çµ±å¯¦ç¾ã€‚æˆ‘å€‘æå‡ºäº†ä¸€ç¨®çµåˆå¹¾ä½•è³‡è¨Šèˆ‡å¤šä»»å‹™å­¸ç¿’ï¼ˆMulti-Task Learning, MTLï¼‰çš„æ¡†æž¶ï¼Œæ—¨åœ¨æå‡å¤šèªžè¨€èˆ‡è·¨é ˜åŸŸæƒ…å¢ƒä¸‹ Valence-Arousal (VA) é€£çºŒåˆ†æ•¸å›žæ­¸çš„ç©©å®šæ€§ã€‚

## ðŸŒŸ æ ¸å¿ƒç‰¹é»ž
* **å¹¾ä½•è¼”åŠ©ç›£ç£ (Geometric Supervision)**ï¼šè‡ªå‹•å¾ž Gold VA æ¨™è¨»ä¸­æŽ¨å°Žæ¥µæ€§ã€å¼·åº¦ã€è±¡é™ï¼Œä»¥åŠåŸºæ–¼æ¥µåº§æ¨™ç³»çµ±çš„ã€Œä¸ƒæƒ… (Seven Emotions)ã€å®šå‘åŽŸåž‹æ¨™ç±¤ï¼Œç„¡éœ€é¡å¤–äººå·¥æ¨™è¨»ã€‚
* **åˆ†ä½ˆæ„ŸçŸ¥å®šå‘åˆ‡åˆ† (Distribution-aware Partitioning)**ï¼šé‡å°ä¸åŒèªžè¨€çš„è³‡æ–™åˆ†ä½ˆï¼Œå‹•æ…‹èª¿æ•´æƒ…ç·’æ‰‡å€ï¼Œç¢ºä¿è¼”åŠ©ä»»å‹™æ¨™ç±¤çš„å¹³è¡¡æ€§ã€‚
* **å¤šæ¨¡åž‹æ”¯æ´èˆ‡ PEFT**ï¼šæ•´åˆäº†ç·¨ç¢¼å™¨æ¨¡åž‹ (XLM-R) èˆ‡è§£ç¢¼å™¨æ¨¡åž‹ (Qwen2, Ministral)ï¼Œä¸¦ä½¿ç”¨ LoRA é€²è¡Œåƒæ•¸é«˜æ•ˆå¾®èª¿ã€‚

## ðŸ“Š å¹¾ä½•è¼”åŠ©ä»»å‹™åˆ†ä½ˆ
æœ¬æ¡†æž¶é€éŽä»¥ä¸‹å››ç¨®å¹¾ä½•è¼”åŠ©ä»»å‹™å°æ¨¡åž‹é€²è¡Œæ­£å‰‡åŒ–ï¼Œé€™äº›ä»»å‹™å……ç•¶ VA ç©ºé–“ä¸­çš„èªžç¾©éŒ¨é»žï¼š

| æƒ…ç·’æ¥µæ€§ (Polarity) | æƒ…ç·’å¼·åº¦ (Intensity) |
| :---: | :---: |
| ![Polarity](./images/ZH/Polarity.png) | ![Intensity](./images/ZH/Intensity.png) |
| **æƒ…ç·’è±¡é™ (Quadrant)** | **ä¸ƒæƒ…å®šå‘åŽŸåž‹ (Qi-Qing)** |
| ![Quadrant](./images/ZH/Quadrant.png) | ![Qiqing](./images/ZH/Qiqing.png) |

## âš™ï¸ æ¶ˆèžå¯¦é©—é–‹é—œ (Ablation Study Switch)
ç‚ºäº†ä¾¿æ–¼å­¸è¡“é‡ç¾ï¼Œæˆ‘å€‘åœ¨è¨“ç·´è…³æœ¬ä¸­è¨­è¨ˆäº†ã€Œè¼”åŠ©ä»»å‹™é–‹é—œã€ã€‚æ‚¨å¯ä»¥åœ¨ `models/` ç›®éŒ„ä¸‹çš„è¨“ç·´è…³æœ¬ä¸­ä¿®æ”¹ `ENABLED_AUX_TASKS` é›†åˆï¼Œå³å¯è¼•é¬†é‡ç¾è«–æ–‡ä¸­çš„æ¶ˆèžå¯¦é©—çµæžœï¼š

> **è¨­å®šæ–¹å¼ï¼š** è«‹åœ¨è…³æœ¬ä¸­ä¿®æ”¹ä»¥ä¸‹è®Šæ•¸ï¼ˆä½ç½®ï¼š`models/encoder_xlmr/XLM_train.py` æˆ– `models/decoder_qwen/qwen_lora_train.py`ï¼‰

```python
    ENABLED_AUX_TASKS = {
        "æ¥µæ€§åˆ†é¡ž", 
        "æƒ…ç·’è±¡é™", 
        "ä¸ƒæƒ…åˆ†é¡ž"   # ç¯„ä¾‹ï¼šæ¶ˆèžæŽ‰ã€Œå¼·åº¦åˆ†é¡žã€
    }
```

## ðŸ“‚ å°ˆæ¡ˆçµæ§‹
```text
CYUT-SemEval2026-Task3/
â”œâ”€â”€ data/                          # è³‡æ–™å­˜æ”¾å€
â”‚   â”œâ”€â”€ raw/                       # åŽŸå§‹ track_b/train & test è³‡æ–™
â”‚   â”œâ”€â”€ processed/                 # æ¨™è¨»å¾Œçš„è³‡æ–™
â”‚   â”œâ”€â”€ sft/                       # å¾®èª¿ç”¨çš„ JSON æ ¼å¼
â”‚   â””â”€â”€ prompts/                   # æŽ¨ç†ç”¨çš„ Prompt æ ¼å¼
â”œâ”€â”€ score/
â”‚   â”œâ”€â”€ metrics_subtask_1_2_3.py   # å®˜æ–¹è©•åˆ†ç¨‹å¼
â”œâ”€â”€ scripts/                       # æ ¸å¿ƒé‚è¼¯
â”‚   â”œâ”€â”€ 01_gen_qiqing_labels.py    # ç”Ÿæˆå‹•æ…‹æ¨™ç±¤
â”‚   â”œâ”€â”€ 02_prepare_sft_data.py     # æ§‹å»ºå¤šä»»å‹™æ•¸æ“š
â”‚   â”œâ”€â”€ 03_prepare_test_prompts.py # æ ¼å¼åŒ–æ¸¬è©¦ Prompt
â”‚   â””â”€â”€ 04_merge_predictions.py    # çµæžœå°é½Š
â”œâ”€â”€ models/                        # æ¨¡åž‹æž¶æ§‹èˆ‡è¨“ç·´
â”‚   â”œâ”€â”€ encoder_xlmr/              # XLM-R è¨“ç·´èˆ‡æŽ¨ç†
â”‚   â”œâ”€â”€ decoder_qwen/              # Qwen2 è¨“ç·´èˆ‡æŽ¨ç†
â”‚   â””â”€â”€ decoder_ministral/         # Ministral è¨“ç·´èˆ‡æŽ¨ç†
â”œâ”€â”€ results/                       # å­˜æ”¾é æ¸¬çµæžœ
â”œâ”€â”€ README.md                      # æœ¬èªªæ˜Žæ–‡ä»¶
â””â”€â”€ requirements.txt               # å¿…è¦å¥—ä»¶æ¸…å–®
```

## ðŸ’» ç’°å¢ƒè¨­å®š (Environment Setup)
è«‹å…ˆç¢ºä¿æ‚¨çš„ç’°å¢ƒä¸­å·²å®‰è£ Pythonï¼ŒæŽ¥è‘—åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤å®‰è£æœ¬å°ˆæ¡ˆæ‰€éœ€çš„ä¾è³´å¥—ä»¶ï¼š

```bash
pip install -r requirements.txt
```
## ðŸ› ï¸ æµæ°´ç·š (Pipeline) èªªæ˜Ž

### 1. æ•¸æ“šé è™•ç†èˆ‡æ¨™è¨»
åŸ·è¡Œä»¥ä¸‹è…³æœ¬ç”Ÿæˆå‹•æ…‹æ¨™ç±¤ä¸¦æº–å‚™å¾®èª¿æ•¸æ“šï¼š
* **ç”Ÿæˆä¸ƒæƒ…æ¨™ç±¤**ï¼š`python scripts/01_gen_qiqing_labels.py`
* **å»ºæ§‹å¤šä»»å‹™ SFT æ•¸æ“š**ï¼š`python scripts/02_prepare_sft_data.py`
* **æ¸¬è©¦ Prompts æº–å‚™**ï¼š`python scripts/03_prepare_test_prompts.py`

### 2. æ¨¡åž‹è¨“ç·´èˆ‡æ¶ˆèžå¯¦é©—
æ‚¨å¯ä»¥åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤å•Ÿå‹•ä¸åŒæ¨¡åž‹åŸºåº§çš„è¨“ç·´ï¼š
* **Encoder-based**: `python models/encoder_xlmr/XLM_train.py`
* **Decoder-based (Qwen)**: `python models/decoder_qwen/qwen_lora_train.py`
* **Decoder-based (Ministral)**: `python models/decoder_ministral/ministral_lora_train.py`

### 3. æŽ¨ç†èˆ‡çµæžœåˆä½µ
æŽ¨ç†å®Œæˆå¾Œï¼Œä½¿ç”¨ `scripts/04_merge_predictions.py` å°‡åˆ†æ•£çš„ Aspect é æ¸¬çµæžœé‡æ–°å°é½Šè‡³å®˜æ–¹è¦æ±‚çš„ JSONL æ ¼å¼ã€‚

---

## ðŸ“Š å¯¦é©—çµæžœ (Experimental Results)

### 1. æ•¸æ“šé›†çµ±è¨ˆ (Dataset Statistics)
| èªžè¨€ | é ˜åŸŸ | è¨“ç·´é›† | é–‹ç™¼é›† | æ¸¬è©¦é›† | ç¸½è¨ˆ |
| :--- | :--- | :---: | :---: | :---: | :---: |
| è‹±èªž (ENG) | ç’°å¢ƒä¿è­· | 922 | 200 | 1020 | 2142 |
| ä¸­èªž (ZHO) | ç’°å¢ƒä¿è­· | 700 | 100 | 600 | 1400 |
| å¾·èªž (DEU) | æ”¿æ²» | 683 | 34 | 263 | 980 |
| å¥ˆåŠåˆ©äºžçš®æ¬½èªž (PCM) | æ”¿æ²» | 1049 | 119 | 331 | 1499 |
| æ–¯ç“¦å¸Œé‡Œèªž (SWA) | æ”¿æ²» | 1375 | 123 | 266 | 1764 |

### 2. æ¶ˆèžå¯¦é©—åˆ†æž (Ablation results on the dev set across five languages)

| Backbone | Setting | VA | Polarity | Intensity | Quadrant | Qiqing | ENG | DEU | ZHO | PCM | SWA | **Avg**â†“ |
| :--- | :--- | :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: |
| **Qwen2** | No-MTL | âœ… | - | - | - | - | 1.9231 | 1.4435 | 0.5826 | 1.5095 | 2.2110 | 1.5339 |
| **Qwen2** | w/o Polarity | âœ… | - | âœ… | âœ… | âœ… | 1.8640 | 1.5119 | 0.5514 | 1.5177 | 2.3078 | 1.5506 |
| **Qwen2** | w/o Intensity | âœ… | âœ… | - | âœ… | âœ… | 1.8936 | 1.4965 | 0.5533 | 1.5929 | 2.4846 | 1.6042 |
| **Qwen2** | w/o Quadrant | âœ… | âœ… | âœ… | - | âœ… | 1.9090 | 1.4986 | 0.5608 | 1.5521 | 2.3671 | 1.5775 |
| **Qwen2** | w/o Qiqing | âœ… | âœ… | âœ… | âœ… | - | **1.7961** | **1.4349** | 0.5424 | 1.5728 | 2.3846 | 1.5462 |
| **Qwen2** | **MTL (5-task)** | âœ… | âœ… | âœ… | âœ… | âœ… | 1.8912 | 1.5384 | **0.5236** | **1.4481** | **2.1908** | **1.5184** |
| | | | | | | | | | | | | |
| **XLM-R** | No-MTL | âœ… | - | - | - | - | 2.1337 | 1.5711 | 0.7227 | 1.7855 | 2.4567 | 1.7339 |
| **XLM-R** | **w/o Polarity** | âœ… | - | âœ… | âœ… | âœ… | **2.0761** | 1.7607 | 0.7119 | **1.1236** | 2.0918 | **1.5528** |
| **XLM-R** | w/o Intensity | âœ… | âœ… | - | âœ… | âœ… | 2.1721 | 1.8826 | 0.9069 | 1.3583 | 2.1049 | 1.6849 |
| **XLM-R** | w/o Quadrant | âœ… | âœ… | âœ… | - | âœ… | 2.0945 | 1.8178 | 0.6814 | 1.6729 | 2.1796 | 1.6892 |
| **XLM-R** | w/o Qiqing | âœ… | âœ… | âœ… | âœ… | - | 2.2338 | **1.5083** | **0.6442** | 1.4426 | **1.9784** | 1.5615 |
| **XLM-R** | MTL (5-task) | âœ… | âœ… | âœ… | âœ… | âœ… | 2.1217 | 1.7988 | 0.7166 | 1.2819 | 1.9907 | 1.5820 |
| | | | | | | | | | | | | |
| **Ministral**| No-MTL | âœ… | - | - | - | - | 1.9414 | 1.4506 | 0.7752 | 1.3391 | 2.3303 | 1.5673 |
| **Ministral**| w/o Polarity | âœ… | - | âœ… | âœ… | âœ… | 1.8331 | **1.3765** | 0.6332 | 1.1642 | 2.0881 | 1.4190 |
| **Ministral**| w/o Intensity | âœ… | âœ… | - | âœ… | âœ… | 1.8187 | 1.5518 | 0.6270 | 1.2497 | 2.2231 | 1.4941 |
| **Ministral**| **w/o Quadrant** | âœ… | âœ… | âœ… | - | âœ… | **1.7568** | 1.4230 | 0.6498 | 1.0811 | **2.0642** | **1.3950** |
| **Ministral**| w/o Qiqing | âœ… | âœ… | âœ… | âœ… | - | 1.8011 | 1.6342 | **0.6263** | 0.9737 | 2.1507 | 1.4372 |
| **Ministral**| MTL (5-task) | âœ… | âœ… | âœ… | âœ… | âœ… | 1.7601 | 1.5471 | 0.6767 | **0.9645** | 2.1284 | 1.4154 |

### 3. å®˜æ–¹æ¸¬è©¦é›†çµæžœ (Test set results across five languages)
*æ¸¬è©¦ç’°å¢ƒä½¿ç”¨ 5-task setting (VA+Polarity+Intensity+Quadrant+Qiqing).*

| Backbone | ENG | DEU | ZHO | PCM | SWA | **Avg**â†“ |
| :--- | :---: | :---: | :---: | :---: | :---: | :---: |
| **Qwen2** | **1.6331** | **1.4827** | 0.6771 | **1.1024** | 2.1042 | **1.3999** |
| **XLM-R** | 2.1330 | 1.6592 | 0.7056 | 1.7634 | **2.0446** | 1.6612 |
| **Ministral** | 1.7793 | 1.5153 | **0.6631** | 1.1851 | 2.2659 | 1.4817 |

---

## ðŸŽ“ å¼•ç”¨
å¦‚æžœæ‚¨åœ¨ç ”ç©¶ä¸­ä½¿ç”¨äº†æœ¬ä»£ç¢¼æˆ–æ¡†æž¶ï¼Œè«‹å¼•ç”¨æˆ‘å€‘çš„è«–æ–‡ï¼š
> Shih-Hung Wu, Xian-yan Chen, and Yi-Min Jian. 2026. "CYUT at SemEval-2026 Task 3: Multi-Task Dimensional Aspect Sentiment Regression by Fine-tuning Pretrained Models in a VA Space with Seven Emotions Directional Prototypes."

## ðŸ“œ æŽˆæ¬Š
æœ¬å°ˆæ¡ˆæŽ¡ç”¨ **MIT License** æŽˆæ¬Šã€‚